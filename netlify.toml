[build]
  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "built"

  # Default build command.
  command = "yarn run test && yarn run build"

  # Functions
  functions = "functions"

[dev]
  command = "yarn run dev" # Command to start your dev server
  port = 8080 # Port that the dev server will be listening on
  publish = "built" # If you use a _redirect file, provide the path to your static content folder


# jamesnadeau.com
[[redirects]]
  from = "http://jamesnadeau.com/*"
  to = "https://jamesjnadeau.com/:splat"
  status = 301
[[redirects]]
  from = "https://jamesnadeau.com/*"
  to = "https://jamesjnadeau.com/:splat"
  status = 301

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "SAMEORIGIN"
    X-XSS-Protection = "1; mode=block"
    Content-Security-Policy = "default-src https:; script-src 'unsafe-inline' 'self' https://www.google-analytics.com https://polyfill.io https://cdnjs.cloudflare.com; style-src https: 'unsafe-inline'; img-src https: data:;"
    Feature-Policy = "autoplay 'none'; camera 'none'"
